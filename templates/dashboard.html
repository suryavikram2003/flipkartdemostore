{% extends "base.html" %}

{% block title %}Dashboard · Simple Shop{% endblock %}

{% block content %}
<section class="mb-6 flex items-center justify-between gap-4">
  <div>
    <h1 class="text-2xl font-semibold tracking-tight text-slate-900">Dashboard</h1>
    <p class="mt-1 text-sm text-slate-500">
      Welcome back, {{ user.name }}. Here are your recent orders.
    </p>
  </div>
  <a
    href="/profile"
    class="text-sm font-medium text-slate-600 hover:text-slate-900 underline-offset-4 hover:underline"
  >
    Edit profile
  </a>
</section>

{% if orders %}
<div class="space-y-4">
  {% for order in orders %}
  <article class="rounded-2xl bg-white p-4 shadow-sm ring-1 ring-slate-100">
    <div class="flex flex-wrap items-center justify-between gap-2">
      <div class="space-y-1">
        <p class="text-sm font-semibold text-slate-900">
          Order #{{ order.id }}
        </p>
        <p class="text-xs text-slate-500">
          Placed on {{ order.created_at.strftime("%Y-%m-%d %H:%M") if order.created_at else "" }}
        </p>
      </div>
      <div class="text-right text-sm">
        <p class="font-semibold text-slate-900">
          ₹{{ "%.2f"|format(order.total_amount) }}
        </p>
        <p class="text-xs uppercase tracking-wide
                  {% if order.status == 'paid' %}text-emerald-600{% else %}text-amber-600{% endif %}">
          {{ order.status }}
        </p>
      </div>
    </div>
    {% if order.lines %}
    <div class="mt-3 border-t border-slate-100 pt-3">
      <ul class="space-y-1 text-xs text-slate-600">
        {% for item in order.lines %}
        <li class="flex justify-between gap-4">
          <span>
            {{ item.product_name }}
            <span class="text-slate-400">× {{ item.quantity }}</span>
          </span>
          <span class="font-medium text-slate-800">
            ₹{{ "%.2f"|format(item.line_total) }}
          </span>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
  </article>
  {% endfor %}
</div>
{% else %}
<div class="rounded-2xl bg-white p-6 text-sm text-slate-600 shadow-sm ring-1 ring-slate-100">
  You don't have any orders yet.
  <a href="/" class="font-medium text-slate-900 underline-offset-4 hover:underline">Start shopping</a>
  to place your first order.
 </div>
{% endif %}
{% endblock %}

